{% extends "base.html" %}


{% block content %}
<h1>Eugene Quest</h1>
<div class="progress">
	<div class="progress-bar" role="progressbar"  aria-valuemin="0" aria-valuemax="{{ stats.questCount }}" style="width: {{stats.completedPercent}}%"></div>
	<div class="progress-bar bg-warning" role="progressbar"  aria-valuemin="0" aria-valuemax="{{ stats.questCount }}" style="width: {{stats.missedPercent}}%"></div>
</div>
</br>

<div class="row">
	<div class="col-md-7 border">
		<h2>Quest list</h2>
		<table class="table table-striped">
			{% for daily in dailies %}
			<tr class="{% if daily.completed %}success{% endif %}">
				<td>
					<h3>{{daily.name}}</h3>
				</td>
				<td>
					<form method="POST">
						{% if daily.subtype == "BG" %}
						<label for="bg">Blood sugar: </label><input type="number" name="bg" value="1"> <br />
						<label for="insulin">Insulin: </label><input type="number" name="insulin" value="1"> <br />
						{% endif %}

						<input type="hidden" name="daily_id" value="{{daily.id}}">
						<input type="hidden" name="complete" value="1">
						<button class="btn btn-success"{% if daily.completed %} disabled="disabled"{% endif %}>Complete</button>
					</form>
					<!--
					<form method="POST">
						<input type="hidden" name="daily_id" value="{{daily.id}}">
						<input type="hidden" name="delete_daily" value="1">
						<button class="btn btn-warning">Delete</button>
					</form> -->
				</td>
				{% endfor %}
		</table>
	</div>
	<div class="col-md-5 border">
		<h2 class="success">Completed</h2>
		</br>
		<table class="table table-striped">
			{% for daily in completed %}
			<tr class="{% if daily.completed %}success{% endif %}">
				<td>
					<h3>{{daily.name}}</h3>
				</td>
			</tr>
				{% endfor %}
		</table> <br /> <br /> <br />
		<h2 class="warning">Missed</h2>
		</br>
		<table class="table table-striped">
			{% for daily in missed %}
			<tr class="{% if daily.completed %}success{% endif %}">
				<td>
					<h3>{{daily.name}}</h3>
				</td>
				<td>
					<form method="POST">
						<input type="hidden" name="daily_id" value="{{daily.id}}">
						<input type="hidden" name="complete" value="1">
						<button class="btn btn-success"{% if daily.completed %} disabled="disabled"{% endif %}>Complete</button>
					</form>
				</td>
			</tr>
			{% endfor %}
		</table>

	</div>
</div>
<br />
<h2>Misc</h2>
<form method="POST">
	<input type="hidden" name="reset_dailies" value="1" />
	<button>Reset dailies</button>
</form>
{% endblock %}
